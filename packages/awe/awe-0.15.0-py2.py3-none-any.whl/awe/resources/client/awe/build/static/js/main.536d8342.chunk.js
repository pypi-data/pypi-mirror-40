(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{180:function(e,t,n){e.exports=n(408)},404:function(e,t,n){},408:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(7),o=n.n(i),s=n(23),l=n(12),c=n(13),u=n(16),p=n(15),d=n(17),f=n(165),h=n(175),v=n.n(h),y=n(176),b=n.n(y),O=n(85),m=n.n(O),j=n(27),E=n.n(j),x=n(177),g=n.n(x),k=n(117),w=n.n(k),I=n(35),S=n(110),C=n.n(S),R=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.table,t=e.data,n=t.headers,r=t.rows,i=n.map(function(e){return{title:e,dataIndex:e,key:e}}),o=r.map(function(e){var t=e.data,r=e.id,a=t.map(function(e,t){return[n[t],e]}),i={key:r},o=!0,s=!1,l=void 0;try{for(var c,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var p=c.value,d=Object(I.a)(p,2),f=d[0],h=d[1];i[f]=h}}catch(v){s=!0,l=v}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}return i});return a.a.createElement(C.a,Object.assign({},e.props,{dataSource:o,columns:i}))}}]),t}(r.Component),V=n(63),T=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.grid,t=e.props,n=e.data,r=e.children;delete t.key;for(var i=n.columns,o=n.childColumns,s=24/i,l=[],c=[],u=0,p=0;p<r.length;p++){var d=p.toString(),f=r[p],h=s*o[p];u+h>24&&(l.push(c),u=0,c=[]),u+=h,c.push(a.a.createElement(V.Col,Object.assign({},t,{key:d,span:h}),f))}c.length>0&&l.push(c);var v=t.gutter||0;return l.map(function(e,n){return a.a.createElement(V.Row,Object.assign({},t,{key:n.toString(),style:{paddingBottom:v}}),e)})}}]),t}(r.Component),L=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.text,t=e.data,n=e.props,r=(t.text||"").split("\n");return a.a.createElement("div",null,r.map(function(e,t){return e?a.a.createElement("div",Object.assign({},n,{key:t.toString()}),e):a.a.createElement("br",Object.assign({},n,{key:t.toString()}))}))}}]),t}(r.Component),A=n(172),J=n(173),M=n.n(J),D=n(116),N=n.n(D),P=n(174),W=n.n(P);function B(e){if(e.userOptions.callbackOptions.movingWindow){var t=function(t,n){var r=e.xAxis[0],a=r.getExtremes().dataMax,i=r.minRange;r.setExtremes(a-i,a+8e3,n)};t(0,!0),N.a.addEvent(e,"update",t)}}var F=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){for(var e=this.props.chart.data,t=e.data,n=e.options,r=e.movingWindow,i=[],o=Object.values(t),s=0;s<o.length;s++){var l=o[s],c=l.series,u=l.title,p=l.type,d={callbackOptions:{movingWindow:r},chart:{type:p,height:300},title:{text:u},plotOptions:Object(A.a)({},p,{marker:{enabled:!1,symbol:"circle"}}),time:{useUTC:!1},xAxis:{minRange:r?1e3*r:void 0,type:"datetime"},yAxis:{title:{text:""},tickPixelInterval:36}},f=void 0;Object.keys(n||{}).length>0?(M.a.defaultsDeep(n,[d]),f=n):f=d,f.series=c,i.push(f)}return a.a.createElement("div",null,i.map(function(e,t){return a.a.createElement(W.a,{callback:B,key:t.toString(),highcharts:N.a,options:e})}))}}]),t}(r.Component),z=n(37),G=n.n(z),H=n(65),K=null,U=function(){function e(t){var n=this,r=t.processor,a=t.host,i=t.port;Object(l.a)(this,e),this.processor=r,this.finishedInitialFetch=!1,this.clientId=null,this.pendingActions=[],this.ws=new WebSocket("ws://".concat(a,":").concat(i)),this.ws.onmessage=this.onMessage.bind(this),this.ws.onerror=function(e){return console.error("ws error",e)},e.fetchInitialState().then(function(e){n.processor.processInitialState(e);var t=e.version,r=!0,a=!1,i=void 0;try{for(var o,s=n.pendingActions[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;l.version>t&&n.processor.dispatch(l)}}catch(c){a=!0,i=c}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}n.pendingActions=[],n.finishedInitialFetch=!0})}return Object(c.a)(e,[{key:"fetchExport",value:function(){var e=Object(H.a)(G.a.mark(function e(){return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/export");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"call",value:function(e,t){this.sendMessage({type:"call",functionId:e,kwargs:t,clientId:this.clientId})}},{key:"updateVariable",value:function(e,t){this.sendMessage({type:"updateVariable",variableId:e,value:t,clientId:this.clientId})}},{key:"sendMessage",value:function(e){this.ws.send(JSON.stringify(e))}},{key:"onMessage",value:function(e){var t=JSON.parse(e.data);"setClientId"===t.type?this.clientId=t.clientId:this.finishedInitialFetch?this.processor.dispatch(t):this.pendingActions.push(t)}}],[{key:"start",value:function(t){var n=t.processor,r=t.host,a=void 0===r?"127.0.0.1":r,i=t.port,o=void 0===i?9e3:i,s=t.initialState;if(s){var l=function(){return console.warn("This is not supported in offline mode")};K={call:l,updateVariable:l,fetchExport:l},setTimeout(function(){return n.processInitialState(s)},0)}else K=new e({processor:n,host:a,port:o});return K}},{key:"fetchInitialState",value:function(){var e=Object(H.a)(G.a.mark(function e(){return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/initial-state");case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),q={div:function(e){return a.a.createElement("div",e.props,e.children)}},Q={Text:function(e){return a.a.createElement(L,Object.assign({},e.props,{text:e}))},Card:function(e){return a.a.createElement(v.a,e.props,e.children.length>0?e.children:e.data.text)},Table:function(e){return a.a.createElement(R,Object.assign({},e.props,{table:e}))},Grid:function(e){return a.a.createElement(T,Object.assign({},e.props,{grid:e}))},Divider:function(e){return a.a.createElement(b.a,e.props)},Collapse:function(e){return a.a.createElement(w.a,e.props,e.children)},Panel:function(e){return a.a.createElement(w.a.Panel,e.props,e.children)},Tab:function(e){return a.a.createElement(m.a.TabPane,e.props,e.children)},Tabs:function(e){return a.a.createElement(m.a,e.props,e.children||a.a.createElement("div",null))},Button:function(e){return a.a.createElement(E.a,Object.assign({},e.props,{onClick:function(){return K.call(e.id)}}),e.data.text)},Input:function(e){return a.a.createElement(g.a,Object.assign({},e.props,{value:e.variables[e.id].value,onChange:function(t){return e.updateVariable(e.id,t.target.value)},onPressEnter:function(){return e.data.enter?K.call(e.id):null}}))},Chart:function(e){return a.a.createElement(F,Object.assign({},e.props,{chart:e}))}},X=Object.assign({},q,Q),Y=n(52),Z=n.n(Y),$=n(19),_=n.n($),ee={updateVariable:function(e,t){return{type:"updateVariable",id:e,value:t}},displayOptions:{type:"displayOptions",displayOptions:!0},hideOptions:{type:"displayOptions",displayOptions:!1},startExportLoading:{type:"exportLoading",exportLoading:!0},endExportLoading:{type:"exportLoading",exportLoading:!1},displayError:function(e){return{type:"displayError",error:e}},hideError:{type:"displayError",error:!1},displayExportObjectResult:function(e){return{type:"displayExportObjectResult",displayExportObjectResult:e}},hideExportObjectResult:{type:"displayExportObjectResult",displayExportObjectResult:!1}},te=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(Z.a,{onCancel:this.props.hideError,visible:!!this.props.displayError,title:a.a.createElement("div",null,a.a.createElement(_.a,{type:"exclamation-circle",style:{paddingRight:10,color:"red"}}),a.a.createElement("span",null,"Error")),footer:null},a.a.createElement("pre",null,a.a.createElement("code",null,this.props.displayError)))}}]),t}(r.Component),ne=Object(s.b)(function(e){return{displayError:e.get("displayError")}},function(e){return{hideError:function(){return e(ee.hideError)}}})(te),re=n(178),ae=n.n(re);function ie(e,t){var n=function(t){e(ee.hideOptions),e(ee.displayError(t))};return Object(H.a)(G.a.mark(function r(){var a,i,o,s,l,c,u,p,d,f,h,v,y;return G.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t&&e(ee.displayOptions),e(ee.startExportLoading),r.prev=2,r.next=5,K.fetchExport();case 5:if(a=r.sent){r.next=8;break}return r.abrupt("return");case 8:return r.next=10,a.text();case 10:i=r.sent,o=null,s=!0,l=!1,c=void 0,r.prev=15,u=a.headers.entries()[Symbol.iterator]();case 17:if(s=(p=u.next()).done){r.next=28;break}if(d=p.value,f=Object(I.a)(d,2),h=f[0],v=f[1],"content-type"!==h){r.next=25;break}return"application/json"===v&&(o=JSON.parse(i)),r.abrupt("break",28);case 25:s=!0,r.next=17;break;case 28:r.next=34;break;case 30:r.prev=30,r.t0=r.catch(15),l=!0,c=r.t0;case 34:r.prev=34,r.prev=35,s||null==u.return||u.return();case 37:if(r.prev=37,!l){r.next=40;break}throw c;case 40:return r.finish(37);case 41:return r.finish(34);case 42:200!==a.status?(y=o?o.error:i,n("Export failed: ".concat(y))):o?(b=o,e(ee.hideOptions),e(ee.displayExportObjectResult(b))):ae()(i,"".concat(document.title,".html"),"text/html"),r.next=48;break;case 45:r.prev=45,r.t1=r.catch(2),n(r.t1);case 48:return r.prev=48,e(ee.endExportLoading),r.finish(48);case 51:case"end":return r.stop()}var b},r,this,[[2,45,48,51],[15,30,34,42],[35,,37,41]])}))}var oe=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hideOptions,n=e.displayOptions,r=e.exportLoading,i=e.doExport;return a.a.createElement(Z.a,{onCancel:t,visible:n,title:"Options",footer:null},a.a.createElement(E.a,{type:"primary",loading:r,onClick:i,icon:"export"},"Export"))}}]),t}(r.Component),se=Object(s.b)(function(e){return{exportLoading:e.get("exportLoading"),displayOptions:e.get("displayOptions")}},function(e){return{hideOptions:function(){return e(ee.hideOptions)},doExport:ie(e)}})(oe),le=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(E.a,{className:"display-options-button",shape:"circle",onClick:this.props.onDisplayOptions,icon:"setting"})}}]),t}(r.Component),ce=Object(s.b)(null,function(e){return{onDisplayOptions:function(){return e(ee.displayOptions)}}})(le),ue=n(179),pe=n.n(ue);var de=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=null,t=this.props.hideExportObjectResult,n=this.props.displayExportObjectResult;if(n){var r=function(e){for(var t=["Name","Value"].map(function(e){return{title:e,dataIndex:e,key:e}}),n=[],r=Object.entries(e),a=0;a<r.length;a++){var i=r[a],o=Object(I.a)(i,2),s=o[0],l=o[1];n.push({Name:s,Value:l,key:n.length.toString()})}return{columns:t,dataSource:n}}(n=n.toJS());e=a.a.createElement(pe.a,Object.assign({},r,{pagination:!1}))}return a.a.createElement(Z.a,{onCancel:t,visible:!!n,title:"Export Result",width:1200,footer:null},e)}}]),t}(r.Component),fe=Object(s.b)(function(e){return{displayExportObjectResult:e.get("displayExportObjectResult")}},function(e){return{hideExportObjectResult:function(){return e(ee.hideExportObjectResult)}}})(de);n(404);function he(e){return e.children=e.children.map(he),X[e.elementType](e)}var ve=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.elements.toJS(),t=this.props.variables.toJS(),n=this.props.style.toJS(),r=this.props,i=r.updateVariable,o=r.displayOptions,s=r.doExport,l=Object.values(e).sort(function(e,t){return e.index-t.index}),c={elementType:"div",children:[],props:{style:n}},u=!0,p=!1,d=void 0;try{for(var h,v=l[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){var y=h.value;y.variables=t,y.updateVariable=i,(e[y.parentId]||c).children.push(y)}}catch(O){p=!0,d=O}finally{try{u||null==v.return||v.return()}finally{if(p)throw d}}var b=he(c);return a.a.createElement(f.HotKeys,{focused:!0,keyMap:{displayOptions:"A A A",doExport:"A A E"},handlers:{displayOptions:o,doExport:s}},a.a.createElement("div",null,b,a.a.createElement(ne,null),a.a.createElement(se,null),a.a.createElement(fe,null),a.a.createElement(ce,null)))}}]),t}(r.Component),ye=Object(s.b)(function(e){return{elements:e.get("elements"),variables:e.get("variables"),style:e.get("style")}},function(e){return{updateVariable:function(t,n){e(ee.updateVariable(t,n)),K.updateVariable(t,n)},displayOptions:function(){return e(ee.displayOptions)},doExport:ie(e,!0)}})(ve),be=function(){function e(t){Object(l.a)(this,e),this.store=t}return Object(c.a)(e,[{key:"processInitialState",value:function(e){var t=e.variables,n=e.children,r=e.style,a=e.title;this.processTitle(a),this.processStyle(r);for(var i=Object.values(t),o=0;o<i.length;o++){var s=i[o];this.processVariable(s)}var l=!0,c=!1,u=void 0;try{for(var p,d=n[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;this.processElement(f)}}catch(h){c=!0,u=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}},{key:"processTitle",value:function(e){document.title=e}},{key:"processStyle",value:function(e){this.dispatch({type:"setStyle",style:e})}},{key:"processVariable",value:function(e){var t=e.id,n=e.value,r=e.version;this.dispatch({type:"newVariable",id:t,value:n,version:r})}},{key:"processElement",value:function(e){var t=e.children,n=e.data,r=e.elementType,a=e.index,i=e.id,o=e.parentId,s=e.props;if(this.dispatch({type:"newElement",id:i,elementType:r,index:a,data:n,parentId:o,props:s}),t){var l=!0,c=!1,u=void 0;try{for(var p,d=t[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;f.parentId=i,this.processElement(f)}}catch(h){c=!0,u=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}}},{key:"dispatch",value:function(e){this.store.dispatch(e)}}]),e}(),Oe=n(24),me=n(81),je=Object(Oe.a)({elements:{},variables:{},style:{},displayError:!1,displayOptions:!1,exportLoading:!1,displayExportObjectResult:!1});var Ee={append:function(e){return function(t){return t.push(e)}},prepend:function(e){return function(t){return t.unshift(e)}},addChartData:function(e){return function(t){return t.withMutations(function(t){var n=!0,r=!1,a=void 0;try{for(var i,o=e.values()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value,l=s.get("title"),c=[l,"series"];t.has(l)||(t=t.set(l,Object(Oe.a)({title:l,type:s.get("type"),series:[]})));var u=t.getIn(c),p={},d={},f=!0,h=!1,v=void 0;try{for(var y,b=u.values()[Symbol.iterator]();!(f=(y=b.next()).done);f=!0){var O=y.value;d[O.get("name")]=!0}}catch(H){h=!0,v=H}finally{try{f||null==b.return||b.return()}finally{if(h)throw v}}var m=!0,j=!1,E=void 0;try{for(var x,g=s.get("series").values()[Symbol.iterator]();!(m=(x=g.next()).done);m=!0){var k=x.value;d[k.get("name")]&&(p[k.get("name")]=k.get("data"))}}catch(H){j=!0,E=H}finally{try{m||null==g.return||g.return()}finally{if(j)throw E}}var w=!0,S=!1,C=void 0;try{for(var R,V=u.entries()[Symbol.iterator]();!(w=(R=V.next()).done);w=!0){var T=R.value,L=Object(I.a)(T,2),A=L[0],J=L[1];if(p[J.get("name")]){var M=J.get("data"),D=p[J.get("name")],N=M.concat(D);u=u.set(A,J.set("data",N)),t=t.setIn(c,u)}}}catch(H){S=!0,C=H}finally{try{w||null==V.return||V.return()}finally{if(S)throw C}}var P=!0,W=!1,B=void 0;try{for(var F,z=function(){var e=F.value;d[e.get("name")]||(t=t.updateIn(c,function(t){return t.push(Object(Oe.a)(e))}))},G=s.get("series").values()[Symbol.iterator]();!(P=(F=G.next()).done);P=!0)z()}catch(H){W=!0,B=H}finally{try{P||null==G.return||G.return()}finally{if(W)throw B}}}}catch(H){r=!0,a=H}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return t})}}};var xe,ge={setStyle:function(e,t){var n=t.style;return e.set("style",Object(Oe.a)(n))},newElement:function(e,t){var n=t.id,r=t.index,a=t.data,i=t.parentId,o=t.elementType,s=t.props,l=void 0===s?{}:s;return e.setIn(["elements",n],Object(Oe.a)({index:r,id:n,parentId:i,data:a,elementType:o,props:l,children:[]}))},newVariable:function(e,t){var n=t.id,r=t.value,a=t.version;return e.setIn(["variables",n],Object(Oe.a)({id:n,value:r,version:a}))},updateElement:(xe="elements",function(e,t){var n=t.id,r=t.updateData,a=r.path,i=void 0===a?[]:a,o=r.action,s=r.data,l=[xe,n].concat(i);return"set"===o?e.setIn(l,Object(Oe.a)(s)):e.updateIn(l,Ee[o](Object(Oe.a)(s)))}),updateVariable:function(e,t){var n=t.id,r=t.value,a=t.version,i=void 0===a?-1:a,o=-1===i,s=e.getIn(["variables",n,"version"]);if(!o&&s>=i)return e;var l={value:r};return o||(l.version=i),e.mergeIn(["variables",n],Object(Oe.a)(l))},displayError:function(e,t){var n=t.error;return e.set("displayError",n)},displayOptions:function(e,t){var n=t.displayOptions;return e.set("displayOptions",n)},exportLoading:function(e,t){var n=t.exportLoading;return e.set("exportLoading",n)},displayExportObjectResult:function(e,t){var n=t.displayExportObjectResult;return e.set("displayExportObjectResult",Object(Oe.a)(n))}};var ke=Object(me.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0,n=ge[t.type];return n?n(e,t):e});U.start({processor:new be(ke),initialState:window.frozenState}),o.a.render(a.a.createElement(s.a,{store:ke},a.a.createElement(ye,null)),document.getElementById("root"))}},[[180,2,1]]]);
//# sourceMappingURL=main.536d8342.chunk.js.map