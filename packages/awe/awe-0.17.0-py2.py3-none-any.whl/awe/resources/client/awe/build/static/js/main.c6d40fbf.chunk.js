(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{181:function(t,e,n){t.exports=n(409)},405:function(t,e,n){},409:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),i=n(7),o=n.n(i),s=n(23),l=n(13),c=n(14),u=n(16),p=n(15),d=n(17),f=n(166),h=n(176),v=n.n(h),b=n(177),y=n.n(b),O=n(86),m=n.n(O),j=n(27),x=n.n(j),g=n(178),E=n.n(g),k=n(118),w=n.n(k),I=n(35),S=n(111),C=n.n(S),R=function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props.table,e=t.data,n=e.headers,r=e.rows,i=n.map(function(t){return{title:t,dataIndex:t,key:t}}),o=r.map(function(t){var e=t.data,r=t.id,a=e.map(function(t,e){return[n[e],t]}),i={key:r},o=!0,s=!1,l=void 0;try{for(var c,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var p=c.value,d=Object(I.a)(p,2),f=d[0],h=d[1];i[f]=h}}catch(v){s=!0,l=v}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}return i});return a.a.createElement(C.a,Object.assign({},t.props,{dataSource:o,columns:i}))}}]),e}(r.Component),L=n(63),V=function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props.grid,e=t.props,n=t.data,r=t.children;delete e.key;for(var i=n.columns,o=n.childColumns,s=24/i,l=[],c=[],u=0,p=0;p<r.length;p++){var d=p.toString(),f=r[p],h=s*o[p];u+h>24&&(l.push(c),u=0,c=[]),u+=h,c.push(a.a.createElement(L.Col,Object.assign({},e,{key:d,span:h}),f))}c.length>0&&l.push(c);var v=e.gutter||0;return l.map(function(t,n){return a.a.createElement(L.Row,Object.assign({},e,{key:n.toString(),style:{paddingBottom:v}}),t)})}}]),e}(r.Component),T=function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props.text,e=t.data,n=t.props,r=(e.text||"").split("\n");return a.a.createElement("div",null,r.map(function(t,e){return t?a.a.createElement("div",Object.assign({},n,{key:e.toString()}),t):a.a.createElement("br",Object.assign({},n,{key:e.toString()}))}))}}]),e}(r.Component),A=n(85),J=n(173),M=n.n(J),D=n(117),N=n.n(D),P=n(174),W=n.n(P);function B(t){if(t.userOptions.callbackOptions.movingWindow){var e=function(e,n){var r=t.xAxis[0],a=r.getExtremes().dataMax,i=r.minRange;r.setExtremes(a-i,a+8e3,n)};e(0,!0),N.a.addEvent(t,"update",e)}}var F=function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){for(var t=this.props.chart.data,e=t.data,n=t.options,r=t.movingWindow,i=[],o=Object.values(e),s=0;s<o.length;s++){var l=o[s],c=l.series,u=l.title,p=l.type,d={callbackOptions:{movingWindow:r},chart:{type:p,height:300},title:{text:u},plotOptions:Object(A.a)({},p,{marker:{enabled:!1,symbol:"circle"}}),time:{useUTC:!1},xAxis:{minRange:r?1e3*r:void 0,type:"datetime"},yAxis:{title:{text:""},tickPixelInterval:36}},f=void 0;Object.keys(n||{}).length>0?(M.a.defaultsDeep(n,[d]),f=n):f=d,f.series=c,i.push(f)}return a.a.createElement("div",null,i.map(function(t,e){return a.a.createElement(W.a,{callback:B,key:e.toString(),highcharts:N.a,options:t})}))}}]),e}(r.Component),z=n(175),G=n(37),H=n.n(G),K=n(65),U=null,q=function(){function t(e){var n=this,r=e.store,a=e.host,i=e.port;Object(l.a)(this,t),this.store=r,this.finishedInitialFetch=!1,this.clientId=null,this.pendingActions=[],this.ws=new WebSocket("ws://".concat(a,":").concat(i)),this.ws.onmessage=this.onMessage.bind(this),this.ws.onerror=function(t){return console.error("ws error",t)},t.fetchInitialState().then(function(e){t.processInitialState(n.store,e);var r=e.version,a=!0,i=!1,o=void 0;try{for(var s,l=n.pendingActions[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;c.version>r&&n.store.dispatch(c)}}catch(u){i=!0,o=u}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}n.pendingActions=[],n.finishedInitialFetch=!0})}return Object(c.a)(t,[{key:"fetchExport",value:function(){var t=Object(K.a)(H.a.mark(function t(){return H.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/export");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"call",value:function(t,e){this.sendMessage({type:"call",functionId:t,kwargs:e,clientId:this.clientId})}},{key:"updateVariable",value:function(t,e){this.sendMessage({type:"updateVariable",variableId:t,value:e,clientId:this.clientId})}},{key:"sendMessage",value:function(t){this.ws.send(JSON.stringify(t))}},{key:"onMessage",value:function(t){var e=JSON.parse(t.data);"setClientId"===e.type?this.clientId=e.clientId:this.finishedInitialFetch?this.store.dispatch(e):this.pendingActions.push(e)}}],[{key:"start",value:function(e){var n=e.store,r=e.host,a=void 0===r?"127.0.0.1":r,i=e.port,o=void 0===i?9e3:i,s=e.initialState;if(s){var l=function(){return console.warn("This is not supported in offline mode")};U={call:l,updateVariable:l,fetchExport:l},setTimeout(function(){t.processInitialState(n,s)},0)}else U=new t({store:n,host:a,port:o});return U}},{key:"fetchInitialState",value:function(){var t=Object(K.a)(H.a.mark(function t(){return H.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/initial-state");case 2:return t.next=4,t.sent.json();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"processInitialState",value:function(t,e){document.title=e.title,t.dispatch(Object(z.a)({type:"processInitialState"},e))}}]),t}(),Q={div:function(t){return a.a.createElement("div",t.props,t.children)}},X={Text:function(t){return a.a.createElement(T,Object.assign({},t.props,{text:t}))},Card:function(t){return a.a.createElement(v.a,t.props,t.children.length>0?t.children:t.data.text)},Table:function(t){return a.a.createElement(R,Object.assign({},t.props,{table:t}))},Grid:function(t){return a.a.createElement(V,Object.assign({},t.props,{grid:t}))},Divider:function(t){return a.a.createElement(y.a,t.props)},Collapse:function(t){return a.a.createElement(w.a,t.props,t.children)},Panel:function(t){return a.a.createElement(w.a.Panel,t.props,t.children)},Tab:function(t){return a.a.createElement(m.a.TabPane,t.props,t.children)},Tabs:function(t){return a.a.createElement(m.a,t.props,t.children||a.a.createElement("div",null))},Button:function(t){return a.a.createElement(x.a,Object.assign({},t.props,{onClick:function(){return U.call(t.id)}}),t.data.text)},Input:function(t){return a.a.createElement(E.a,Object.assign({},t.props,{value:t.variables[t.id].value,onChange:function(e){return t.updateVariable(t.id,e.target.value)},onPressEnter:function(){return t.data.enter?U.call(t.id):null}}))},Chart:function(t){return a.a.createElement(F,Object.assign({},t.props,{chart:t}))}},Y=Object.assign({},Q,X),Z=n(52),$=n.n(Z),_=n(19),tt=n.n(_),et={updateVariable:function(t,e){return{type:"updateVariable",id:t,value:e}},displayOptions:{type:"displayOptions",displayOptions:!0},hideOptions:{type:"displayOptions",displayOptions:!1},startExportLoading:{type:"exportLoading",exportLoading:!0},endExportLoading:{type:"exportLoading",exportLoading:!1},displayError:function(t){return{type:"displayError",error:t}},hideError:{type:"displayError",error:!1},displayExportObjectResult:function(t){return{type:"displayExportObjectResult",displayExportObjectResult:t}},hideExportObjectResult:{type:"displayExportObjectResult",displayExportObjectResult:!1}},nt=function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return a.a.createElement($.a,{onCancel:this.props.hideError,visible:!!this.props.displayError,title:a.a.createElement("div",null,a.a.createElement(tt.a,{type:"exclamation-circle",style:{paddingRight:10,color:"red"}}),a.a.createElement("span",null,"Error")),footer:null},a.a.createElement("pre",null,a.a.createElement("code",null,this.props.displayError)))}}]),e}(r.Component),rt=Object(s.b)(function(t){return{displayError:t.get("displayError")}},function(t){return{hideError:function(){return t(et.hideError)}}})(nt),at=n(179),it=n.n(at);function ot(t,e){var n=function(e){t(et.hideOptions),t(et.displayError(e))};return Object(K.a)(H.a.mark(function r(){var a,i,o,s,l,c,u,p,d,f,h,v,b;return H.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e&&t(et.displayOptions),t(et.startExportLoading),r.prev=2,r.next=5,U.fetchExport();case 5:if(a=r.sent){r.next=8;break}return r.abrupt("return");case 8:return r.next=10,a.text();case 10:i=r.sent,o=null,s=!0,l=!1,c=void 0,r.prev=15,u=a.headers.entries()[Symbol.iterator]();case 17:if(s=(p=u.next()).done){r.next=28;break}if(d=p.value,f=Object(I.a)(d,2),h=f[0],v=f[1],"content-type"!==h){r.next=25;break}return"application/json"===v&&(o=JSON.parse(i)),r.abrupt("break",28);case 25:s=!0,r.next=17;break;case 28:r.next=34;break;case 30:r.prev=30,r.t0=r.catch(15),l=!0,c=r.t0;case 34:r.prev=34,r.prev=35,s||null==u.return||u.return();case 37:if(r.prev=37,!l){r.next=40;break}throw c;case 40:return r.finish(37);case 41:return r.finish(34);case 42:200!==a.status?(b=o?o.error:i,n("Export failed: ".concat(b))):o?(y=o,t(et.hideOptions),t(et.displayExportObjectResult(y))):it()(i,"".concat(document.title,".html"),"text/html"),r.next=48;break;case 45:r.prev=45,r.t1=r.catch(2),n(r.t1);case 48:return r.prev=48,t(et.endExportLoading),r.finish(48);case 51:case"end":return r.stop()}var y},r,this,[[2,45,48,51],[15,30,34,42],[35,,37,41]])}))}var st=function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props,e=t.hideOptions,n=t.displayOptions,r=t.exportLoading,i=t.doExport;return a.a.createElement($.a,{onCancel:e,visible:n,title:"Options",footer:null},a.a.createElement(x.a,{type:"primary",loading:r,onClick:i,icon:"export"},"Export"))}}]),e}(r.Component),lt=Object(s.b)(function(t){return{exportLoading:t.get("exportLoading"),displayOptions:t.get("displayOptions")}},function(t){return{hideOptions:function(){return t(et.hideOptions)},doExport:ot(t)}})(st),ct=function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return a.a.createElement(x.a,{className:"display-options-button",shape:"circle",onClick:this.props.onDisplayOptions,icon:"setting"})}}]),e}(r.Component),ut=Object(s.b)(null,function(t){return{onDisplayOptions:function(){return t(et.displayOptions)}}})(ct),pt=n(180),dt=n.n(pt);var ft=function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=null,e=this.props.hideExportObjectResult,n=this.props.displayExportObjectResult;if(n){var r=function(t){for(var e=["Name","Value"].map(function(t){return{title:t,dataIndex:t,key:t}}),n=[],r=Object.entries(t),a=0;a<r.length;a++){var i=r[a],o=Object(I.a)(i,2),s=o[0],l=o[1];n.push({Name:s,Value:l,key:n.length.toString()})}return{columns:e,dataSource:n}}(n=n.toJS());t=a.a.createElement(dt.a,Object.assign({},r,{pagination:!1}))}return a.a.createElement($.a,{onCancel:e,visible:!!n,title:"Export Result",width:1200,footer:null},t)}}]),e}(r.Component),ht=Object(s.b)(function(t){return{displayExportObjectResult:t.get("displayExportObjectResult")}},function(t){return{hideExportObjectResult:function(){return t(et.hideExportObjectResult)}}})(ft);n(405);function vt(t){return t.children=t.children.map(vt),Y[t.elementType](t)}var bt=function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props.elements.toJS(),e=this.props.variables.toJS(),n=this.props.style.toJS(),r=this.props,i=r.updateVariable,o=r.displayOptions,s=r.doExport,l=Object.values(t).sort(function(t,e){return t.index-e.index}),c={elementType:"div",children:[],props:{style:n}},u=!0,p=!1,d=void 0;try{for(var h,v=l[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){var b=h.value;b.variables=e,b.updateVariable=i,(t[b.parentId]||c).children.push(b)}}catch(O){p=!0,d=O}finally{try{u||null==v.return||v.return()}finally{if(p)throw d}}var y=vt(c);return a.a.createElement(f.HotKeys,{focused:!0,keyMap:{displayOptions:"A A A",doExport:"A A E"},handlers:{displayOptions:o,doExport:s}},a.a.createElement("div",null,y,a.a.createElement(rt,null),a.a.createElement(lt,null),a.a.createElement(ht,null),a.a.createElement(ut,null)))}}]),e}(r.Component),yt=Object(s.b)(function(t){return{elements:t.get("elements"),variables:t.get("variables"),style:t.get("style")}},function(t){return{updateVariable:function(e,n){t(et.updateVariable(e,n)),U.updateVariable(e,n)},displayOptions:function(){return t(et.displayOptions)},doExport:ot(t,!0)}})(bt),Ot=n(24),mt=n(81),jt=Object(Ot.a)({elements:{},variables:{},style:{},displayError:!1,displayOptions:!1,exportLoading:!1,displayExportObjectResult:!1});var xt={append:function(t){return function(e){return e.push(t)}},prepend:function(t){return function(e){return e.unshift(t)}},extend:function(t){return function(e){return e.concat(t)}},addChartData:function(t){return function(e){return e.withMutations(function(e){var n=!0,r=!1,a=void 0;try{for(var i,o=t.values()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value,l=s.get("title"),c=[l,"series"];e.has(l)||(e=e.set(l,Object(Ot.a)({title:l,type:s.get("type"),series:[]})));var u=e.getIn(c),p={},d={},f=!0,h=!1,v=void 0;try{for(var b,y=u.values()[Symbol.iterator]();!(f=(b=y.next()).done);f=!0){var O=b.value;d[O.get("name")]=!0}}catch(H){h=!0,v=H}finally{try{f||null==y.return||y.return()}finally{if(h)throw v}}var m=!0,j=!1,x=void 0;try{for(var g,E=s.get("series").values()[Symbol.iterator]();!(m=(g=E.next()).done);m=!0){var k=g.value;d[k.get("name")]&&(p[k.get("name")]=k.get("data"))}}catch(H){j=!0,x=H}finally{try{m||null==E.return||E.return()}finally{if(j)throw x}}var w=!0,S=!1,C=void 0;try{for(var R,L=u.entries()[Symbol.iterator]();!(w=(R=L.next()).done);w=!0){var V=R.value,T=Object(I.a)(V,2),A=T[0],J=T[1];if(p[J.get("name")]){var M=J.get("data"),D=p[J.get("name")],N=M.concat(D);u=u.set(A,J.set("data",N)),e=e.setIn(c,u)}}}catch(H){S=!0,C=H}finally{try{w||null==L.return||L.return()}finally{if(S)throw C}}var P=!0,W=!1,B=void 0;try{for(var F,z=function(){var t=F.value;d[t.get("name")]||(e=e.updateIn(c,function(e){return e.push(Object(Ot.a)(t))}))},G=s.get("series").values()[Symbol.iterator]();!(P=(F=G.next()).done);P=!0)z()}catch(H){W=!0,B=H}finally{try{P||null==G.return||G.return()}finally{if(W)throw B}}}}catch(H){r=!0,a=H}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return e})}}};function gt(t,e){var n=e.children,r=e.id;if(t=Et(t,e),n){var a=!0,i=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;c.parentId=r,t=gt(t,c)}}catch(u){i=!0,o=u}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}}return t}function Et(t,e){var n=e.id,r=e.index,a=e.data,i=e.parentId,o=e.elementType,s=e.props,l=void 0===s?{}:s;return t.setIn(["elements",n],Object(Ot.a)({index:r,id:n,parentId:i,data:a,elementType:o,props:l,children:[]}))}function kt(t,e){var n=e.id,r=e.value,a=e.version;return t.setIn(["variables",n],Object(Ot.a)({id:n,value:r,version:a}))}var wt,It={processInitialState:function(t,e){var n=e.style,r=e.variables,a=e.children;return t.withMutations(function(t){t=t.set("style",Object(Ot.a)(n));for(var e=Object.values(r),i=0;i<e.length;i++)t=kt(t,e[i]);var o=!0,s=!1,l=void 0;try{for(var c,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)t=gt(t,c.value)}catch(p){s=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}return t})},newElement:Et,newVariable:kt,updateElement:(wt="elements",function(t,e){var n=e.id,r=e.updateData,a=r.path,i=void 0===a?[]:a,o=r.action,s=r.data,l=[wt,n].concat(i);return"set"===o?t.setIn(l,Object(Ot.a)(s)):t.updateIn(l,xt[o](Object(Ot.a)(s)))}),updateVariable:function(t,e){var n=e.id,r=e.value,a=e.version,i=void 0===a?-1:a,o=-1===i,s=t.getIn(["variables",n,"version"]);if(!o&&s>=i)return t;var l={value:r};return o||(l.version=i),t.mergeIn(["variables",n],Object(Ot.a)(l))},displayError:function(t,e){var n=e.error;return t.set("displayError",n)},displayOptions:function(t,e){var n=e.displayOptions;return t.set("displayOptions",n)},exportLoading:function(t,e){var n=e.exportLoading;return t.set("exportLoading",n)},displayExportObjectResult:function(t,e){var n=e.displayExportObjectResult;return t.set("displayExportObjectResult",Object(Ot.a)(n))}};var St=Object(mt.b)(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,e=arguments.length>1?arguments[1]:void 0,n=It[e.type];return n?n(t,e):t});q.start({store:St,initialState:window.frozenState}),o.a.render(a.a.createElement(s.a,{store:St},a.a.createElement(yt,null)),document.getElementById("root"))}},[[181,2,1]]]);
//# sourceMappingURL=main.c6d40fbf.chunk.js.map