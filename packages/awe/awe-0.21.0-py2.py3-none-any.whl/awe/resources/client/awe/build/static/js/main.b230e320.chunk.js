(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{181:function(e,t,n){e.exports=n(409)},405:function(e,t,n){},409:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(7),o=n.n(i),s=n(23),l=n(12),c=n(13),u=n(16),p=n(15),d=n(17),f=n(166),v=n(176),h=n.n(v),y=n(177),b=n.n(y),O=n(86),m=n.n(O),j=n(27),x=n.n(j),E=n(178),g=n.n(E),k=n(118),w=n.n(k),I=n(18),S=n.n(I),C=n(35),R=n(111),L=n.n(R),V=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.table,t=e.data,n=t.headers,r=t.rows,i=n.map(function(e){return{title:e,dataIndex:e,key:e}}),o=r.map(function(e){var t=e.data,r=e.id,a=t.map(function(e,t){return[n[t],e]}),i={key:r},o=!0,s=!1,l=void 0;try{for(var c,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var p=c.value,d=Object(C.a)(p,2),f=d[0],v=d[1];i[f]=v}}catch(h){s=!0,l=h}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}return i});return a.a.createElement(L.a,Object.assign({},e.props,{dataSource:o,columns:i}))}}]),t}(r.Component),T=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.inline,t=e.data,n=e.props,r=e.children;delete n.key;var i=t.text;return a.a.createElement("span",n,r.length>0?r:i)}}]),t}(r.Component),A=n(63),M=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.grid,t=e.props,n=e.data,r=e.children;delete t.key;for(var i=n.columns,o=n.childColumns,s=24/i,l=[],c=[],u=0,p=0;p<r.length;p++){var d=p.toString(),f=r[p],v=s*o[p];u+v>24&&(l.push(c),u=0,c=[]),u+=v,c.push(a.a.createElement(A.Col,Object.assign({},t,{key:d,span:v}),f))}c.length>0&&l.push(c);var h=t.gutter||0;return l.map(function(e,n){return a.a.createElement(A.Row,Object.assign({},t,{key:n.toString(),style:{paddingBottom:h}}),e)})}}]),t}(r.Component),J=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.text,t=e.data,n=e.props,r=t.text;if(!r)return delete n.key,a.a.createElement("br",n);var i=(r||"").split("\n");return a.a.createElement("div",null,i.map(function(e,t){return e?a.a.createElement("div",Object.assign({},n,{key:t.toString()}),e):a.a.createElement("br",Object.assign({},n,{key:t.toString()}))}))}}]),t}(r.Component),D=n(85),N=n(173),P=n.n(N),W=n(117),B=n.n(W),F=n(174),z=n.n(F);function G(e){if(e.userOptions.callbackOptions.movingWindow){var t=function(t,n){var r=e.xAxis[0],a=r.getExtremes().dataMax,i=r.minRange;r.setExtremes(a-i,a+8e3,n)};t(0,!0),B.a.addEvent(e,"update",t)}}var H=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.chart,t=e.data,n=t.data,r=t.options,i=t.movingWindow,o=e.props;delete o.key;for(var s=[],l=Object.values(n),c=0;c<l.length;c++){var u=l[c],p=u.series,d=u.title,f=u.type,v={callbackOptions:{movingWindow:i},chart:{type:f,height:300},title:{text:d},plotOptions:Object(D.a)({},f,{marker:{enabled:!1,symbol:"circle"}}),time:{useUTC:!1},xAxis:{minRange:i?1e3*i:void 0,type:"datetime"},yAxis:{title:{text:""},tickPixelInterval:36}},h=void 0;Object.keys(r||{}).length>0?(P.a.defaultsDeep(r,[v]),h=r):h=v,h.series=p,s.push(h)}return a.a.createElement("div",o,s.map(function(e,t){return a.a.createElement(z.a,{callback:G,key:t.toString(),highcharts:B.a,options:e})}))}}]),t}(r.Component),K=n(175),U=n(37),q=n.n(U),Q=n(65),X=null,Y=function(){function e(t){var n=this,r=t.store,a=t.host,i=t.port;Object(l.a)(this,e),this.store=r,this.finishedInitialFetch=!1,this.clientId=null,this.pendingActions=[],this.ws=new WebSocket("ws://".concat(a,":").concat(i)),this.ws.onmessage=this.onMessage.bind(this),this.ws.onerror=function(e){return console.error("ws error",e)},e.fetchInitialState().then(function(t){e.processInitialState(n.store,t);var r=t.version,a=!0,i=!1,o=void 0;try{for(var s,l=n.pendingActions[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;c.version>r&&n.store.dispatch(c)}}catch(u){i=!0,o=u}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}n.pendingActions=[],n.finishedInitialFetch=!0})}return Object(c.a)(e,[{key:"fetchExport",value:function(){var e=Object(Q.a)(q.a.mark(function e(){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/export");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"call",value:function(e,t){this.sendMessage({type:"call",functionId:e,kwargs:t,clientId:this.clientId})}},{key:"updateVariable",value:function(e,t){this.sendMessage({type:"updateVariable",variableId:e,value:t,clientId:this.clientId})}},{key:"sendMessage",value:function(e){this.ws.send(JSON.stringify(e))}},{key:"onMessage",value:function(e){var t=JSON.parse(e.data);"setClientId"===t.type?this.clientId=t.clientId:this.finishedInitialFetch?this.store.dispatch(t):this.pendingActions.push(t)}}],[{key:"start",value:function(t){var n=t.store,r=t.host,a=void 0===r?"127.0.0.1":r,i=t.port,o=void 0===i?9e3:i,s=t.initialState;if(s){var l=function(){return console.warn("This is not supported in offline mode")};X={call:l,updateVariable:l,fetchExport:l},setTimeout(function(){e.processInitialState(n,s)},0)}else X=new e({store:n,host:a,port:o});return X}},{key:"fetchInitialState",value:function(){var e=Object(Q.a)(q.a.mark(function e(){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/initial-state");case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"processInitialState",value:function(e,t){document.title=t.title,e.dispatch(Object(K.a)({type:"processInitialState"},t))}}]),e}(),Z={div:function(e){return a.a.createElement("div",e.props,e.children)}},$={Text:function(e){return a.a.createElement(J,Object.assign({},e.props,{text:e}))},Card:function(e){return a.a.createElement(h.a,e.props,e.children.length>0?e.children:e.data.text)},Table:function(e){return a.a.createElement(V,Object.assign({},e.props,{table:e}))},Grid:function(e){return a.a.createElement(M,Object.assign({},e.props,{grid:e}))},Divider:function(e){return a.a.createElement(b.a,e.props)},Collapse:function(e){return a.a.createElement(w.a,e.props,e.children)},Panel:function(e){return a.a.createElement(w.a.Panel,e.props,e.children)},Tab:function(e){return a.a.createElement(m.a.TabPane,e.props,e.children)},Tabs:function(e){return a.a.createElement(m.a,e.props,e.children||a.a.createElement("div",null))},Button:function(e){return a.a.createElement(x.a,Object.assign({},e.props,{onClick:function(){return X.call(e.id)}}),e.data.text)},Input:function(e){return a.a.createElement(g.a,Object.assign({},e.props,{value:e.variables[e.id].value,onChange:function(t){return e.updateVariable(e.id,t.target.value)},onPressEnter:function(){return e.data.enter?X.call(e.id):null}}))},Chart:function(e){return a.a.createElement(H,Object.assign({},e.props,{chart:e}))},Icon:function(e){return a.a.createElement(S.a,e.props)},Inline:function(e){return a.a.createElement(T,Object.assign({},e.props,{inline:e}))}},_=Object.assign({},Z,$),ee=n(45),te=n.n(ee),ne={updateVariable:function(e,t){return{type:"updateVariable",id:e,value:t}},displayOptions:{type:"displayOptions",displayOptions:!0},hideOptions:{type:"displayOptions",displayOptions:!1},startExportLoading:{type:"exportLoading",exportLoading:!0},endExportLoading:{type:"exportLoading",exportLoading:!1},displayError:function(e){return{type:"displayError",error:e}},hideError:{type:"displayError",error:!1},displayExportObjectResult:function(e){return{type:"displayExportObjectResult",displayExportObjectResult:e}},hideExportObjectResult:{type:"displayExportObjectResult",displayExportObjectResult:!1}},re=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(te.a,{onCancel:this.props.hideError,visible:!!this.props.displayError,title:a.a.createElement("div",null,a.a.createElement(S.a,{type:"exclamation-circle",style:{paddingRight:10,color:"red"}}),a.a.createElement("span",null,"Error")),footer:null},a.a.createElement("pre",null,a.a.createElement("code",null,this.props.displayError)))}}]),t}(r.Component),ae=Object(s.b)(function(e){return{displayError:e.get("displayError")}},function(e){return{hideError:function(){return e(ne.hideError)}}})(re),ie=n(179),oe=n.n(ie);function se(e,t){var n=function(){return e(ne.hideOptions)},r=function(t){n(),e(ne.displayError(t))};return Object(Q.a)(q.a.mark(function a(){var i,o,s,l,c,u,p,d,f,v,h,y,b;return q.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t&&e(ne.displayOptions),e(ne.startExportLoading),a.prev=2,a.next=5,X.fetchExport();case 5:if(i=a.sent){a.next=10;break}return n(),te.a.warn({title:"Page is already exported"}),a.abrupt("return");case 10:return a.next=12,i.text();case 12:o=a.sent,s=null,l=!0,c=!1,u=void 0,a.prev=17,p=i.headers.entries()[Symbol.iterator]();case 19:if(l=(d=p.next()).done){a.next=30;break}if(f=d.value,v=Object(C.a)(f,2),h=v[0],y=v[1],"content-type"!==h){a.next=27;break}return"application/json"===y&&(s=JSON.parse(o)),a.abrupt("break",30);case 27:l=!0,a.next=19;break;case 30:a.next=36;break;case 32:a.prev=32,a.t0=a.catch(17),c=!0,u=a.t0;case 36:a.prev=36,a.prev=37,l||null==p.return||p.return();case 39:if(a.prev=39,!c){a.next=42;break}throw u;case 42:return a.finish(39);case 43:return a.finish(36);case 44:200!==i.status?(b=s?s.error:o,r("Export failed: ".concat(b))):s?(O=s,n(),e(ne.displayExportObjectResult(O))):oe()(o,"".concat(document.title,".html"),"text/html"),a.next=50;break;case 47:a.prev=47,a.t1=a.catch(2),r(a.t1);case 50:return a.prev=50,e(ne.endExportLoading),a.finish(50);case 53:case"end":return a.stop()}var O},a,this,[[2,47,50,53],[17,32,36,44],[37,,39,43]])}))}var le=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hideOptions,n=e.displayOptions,r=e.exportLoading,i=e.doExport;return a.a.createElement(te.a,{onCancel:t,visible:n,title:"Options",footer:null},a.a.createElement(x.a,{type:"primary",loading:r,onClick:i,icon:"export"},"Export"))}}]),t}(r.Component),ce=Object(s.b)(function(e){return{exportLoading:e.get("exportLoading"),displayOptions:e.get("displayOptions")}},function(e){return{hideOptions:function(){return e(ne.hideOptions)},doExport:se(e)}})(le),ue=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(x.a,{className:"display-options-button",shape:"circle",onClick:this.props.onDisplayOptions,icon:"setting"})}}]),t}(r.Component),pe=Object(s.b)(null,function(e){return{onDisplayOptions:function(){return e(ne.displayOptions)}}})(ue),de=n(180),fe=n.n(de);var ve=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=null,t=this.props.hideExportObjectResult,n=this.props.displayExportObjectResult;if(n){var r=function(e){for(var t=["Name","Value"].map(function(e){return{title:e,dataIndex:e,key:e}}),n=[],r=Object.entries(e),a=0;a<r.length;a++){var i=r[a],o=Object(C.a)(i,2),s=o[0],l=o[1];n.push({Name:s,Value:l,key:n.length.toString()})}return{columns:t,dataSource:n}}(n=n.toJS());e=a.a.createElement(fe.a,Object.assign({},r,{pagination:!1}))}return a.a.createElement(te.a,{onCancel:t,visible:!!n,title:"Export Result",width:1200,footer:null},e)}}]),t}(r.Component),he=Object(s.b)(function(e){return{displayExportObjectResult:e.get("displayExportObjectResult")}},function(e){return{hideExportObjectResult:function(){return e(ne.hideExportObjectResult)}}})(ve);n(405);function ye(e){return e.children=e.children.map(ye),_[e.elementType](e)}var be=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.elements.toJS(),t=this.props.variables.toJS(),n=this.props.style.toJS(),r=this.props,i=r.updateVariable,o=r.displayOptions,s=r.doExport,l=Object.values(e).sort(function(e,t){return e.index-t.index}),c={elementType:"div",children:[],props:{style:n}},u=!0,p=!1,d=void 0;try{for(var v,h=l[Symbol.iterator]();!(u=(v=h.next()).done);u=!0){var y=v.value;y.variables=t,y.updateVariable=i,(e[y.parentId]||c).children.push(y)}}catch(O){p=!0,d=O}finally{try{u||null==h.return||h.return()}finally{if(p)throw d}}var b=ye(c);return a.a.createElement(f.HotKeys,{focused:!0,keyMap:{displayOptions:"A A A",doExport:"A A E"},handlers:{displayOptions:o,doExport:s}},a.a.createElement("div",null,b,a.a.createElement(ae,null),a.a.createElement(ce,null),a.a.createElement(he,null),a.a.createElement(pe,null)))}}]),t}(r.Component),Oe=Object(s.b)(function(e){return{elements:e.get("elements"),variables:e.get("variables"),style:e.get("style")}},function(e){return{updateVariable:function(t,n){e(ne.updateVariable(t,n)),X.updateVariable(t,n)},displayOptions:function(){return e(ne.displayOptions)},doExport:se(e,!0)}})(be),me=n(24),je=n(81),xe=Object(me.a)({elements:{},variables:{},style:{},displayError:!1,displayOptions:!1,exportLoading:!1,displayExportObjectResult:!1});var Ee={append:function(e){return function(t){return t.push(e)}},prepend:function(e){return function(t){return t.unshift(e)}},extend:function(e){return function(t){return t.concat(e)}},addChartData:function(e){return function(t){return t.withMutations(function(t){var n=!0,r=!1,a=void 0;try{for(var i,o=e.values()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value,l=s.get("title"),c=[l,"series"];t.has(l)||(t=t.set(l,Object(me.a)({title:l,type:s.get("type"),series:[]})));var u=t.getIn(c),p={},d={},f=!0,v=!1,h=void 0;try{for(var y,b=u.values()[Symbol.iterator]();!(f=(y=b.next()).done);f=!0){var O=y.value;d[O.get("name")]=!0}}catch(H){v=!0,h=H}finally{try{f||null==b.return||b.return()}finally{if(v)throw h}}var m=!0,j=!1,x=void 0;try{for(var E,g=s.get("series").values()[Symbol.iterator]();!(m=(E=g.next()).done);m=!0){var k=E.value;d[k.get("name")]&&(p[k.get("name")]=k.get("data"))}}catch(H){j=!0,x=H}finally{try{m||null==g.return||g.return()}finally{if(j)throw x}}var w=!0,I=!1,S=void 0;try{for(var R,L=u.entries()[Symbol.iterator]();!(w=(R=L.next()).done);w=!0){var V=R.value,T=Object(C.a)(V,2),A=T[0],M=T[1];if(p[M.get("name")]){var J=M.get("data"),D=p[M.get("name")],N=J.concat(D);u=u.set(A,M.set("data",N)),t=t.setIn(c,u)}}}catch(H){I=!0,S=H}finally{try{w||null==L.return||L.return()}finally{if(I)throw S}}var P=!0,W=!1,B=void 0;try{for(var F,z=function(){var e=F.value;d[e.get("name")]||(t=t.updateIn(c,function(t){return t.push(Object(me.a)(e))}))},G=s.get("series").values()[Symbol.iterator]();!(P=(F=G.next()).done);P=!0)z()}catch(H){W=!0,B=H}finally{try{P||null==G.return||G.return()}finally{if(W)throw B}}}}catch(H){r=!0,a=H}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return t})}}};function ge(e,t){var n=t.children,r=t.id;if(e=ke(e,t),n){var a=!0,i=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;c.parentId=r,e=ge(e,c)}}catch(u){i=!0,o=u}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}}return e}function ke(e,t){var n=t.id,r=t.index,a=t.data,i=t.parentId,o=t.elementType,s=t.props,l=void 0===s?{}:s;return e.setIn(["elements",n],Object(me.a)({index:r,id:n,parentId:i,data:a,elementType:o,props:l,children:[]}))}function we(e,t){var n=t.id,r=t.value,a=t.version;return e.setIn(["variables",n],Object(me.a)({id:n,value:r,version:a}))}var Ie,Se={processInitialState:function(e,t){var n=t.style,r=t.variables,a=t.children;return e.withMutations(function(e){e=e.set("style",Object(me.a)(n));for(var t=Object.values(r),i=0;i<t.length;i++)e=we(e,t[i]);var o=!0,s=!1,l=void 0;try{for(var c,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)e=ge(e,c.value)}catch(p){s=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}return e})},newElement:ke,removeElements:function(e,t){var n=t.ids;return e.withMutations(function(e){var t=!0,r=!1,a=void 0;try{for(var i,o=n[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;e=e.removeIn(["elements",s])}}catch(l){r=!0,a=l}finally{try{t||null==o.return||o.return()}finally{if(r)throw a}}return e})},newVariable:we,updateElement:(Ie="elements",function(e,t){var n=t.id,r=t.updateData,a=r.path,i=void 0===a?[]:a,o=r.action,s=r.data,l=[Ie,n].concat(i);return"set"===o?e.setIn(l,Object(me.a)(s)):e.updateIn(l,Ee[o](Object(me.a)(s)))}),updateVariable:function(e,t){var n=t.id,r=t.value,a=t.version,i=void 0===a?-1:a,o=-1===i,s=e.getIn(["variables",n,"version"]);if(!o&&s>=i)return e;var l={value:r};return o||(l.version=i),e.mergeIn(["variables",n],Object(me.a)(l))},displayError:function(e,t){var n=t.error;return e.set("displayError",n)},displayOptions:function(e,t){var n=t.displayOptions;return e.set("displayOptions",n)},exportLoading:function(e,t){var n=t.exportLoading;return e.set("exportLoading",n)},displayExportObjectResult:function(e,t){var n=t.displayExportObjectResult;return e.set("displayExportObjectResult",Object(me.a)(n))}};var Ce=Object(je.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0,n=Se[t.type];return n?n(e,t):e});Y.start({store:Ce,initialState:window.frozenState}),o.a.render(a.a.createElement(s.a,{store:Ce},a.a.createElement(Oe,null)),document.getElementById("root"))}},[[181,2,1]]]);
//# sourceMappingURL=main.b230e320.chunk.js.map