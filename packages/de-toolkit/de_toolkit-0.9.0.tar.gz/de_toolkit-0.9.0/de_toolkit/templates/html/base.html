<!DOCTYPE html>
<html lang="en">
    <head>
    <!-- asset css -->
    {% for name, code in assets['css'].items() %}
    <style>
        {{ code }}
    </style>
    {% endfor %}

    <script type="text/javascript" src="{{ assets['js']['jquery-3.3.1.min.js'] }}"></script>
    <script type="text/javascript" src="{{ assets['js']['bootstrap.bundle.min.js'] }}"></script>
    <script type="text/javascript" src="{{ assets['js']['underscore-min.js'] }}"></script>
    <script type="text/javascript" src="{{ assets['js']['doT.min.js'] }}"></script>
    <script type="text/javascript" src="{{ assets['js']['highcharts.js'] }}"></script>

    <script type="text/javascript">
        // top level namespace
        var detk = {};

        // dynamically loaded JS
        {% for name, code in templates['js'].items() %}
            {{ code }}
        {% endfor %}
    </script>
    <style>
        {% for name, code in templates['css'].items() %}
            {{ code }}
        {% endfor %}
    </style>
    </head>
    <body>
        <!-- dynamically loaded  HTML templates -->
        {% for name, tmpl in templates['html'].items() %}
        <template id="{{name}}">
            {{ tmpl }}
        </template>
        {% endfor %}
        <script type="text/javascript">
            detk.data = {{ data }};
        </script>
    </body>
</html>
