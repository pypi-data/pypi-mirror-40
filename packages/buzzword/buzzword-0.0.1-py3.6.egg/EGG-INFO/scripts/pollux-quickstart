#!/usr/bin/env bash

# Download some CONLL-U data, turn it into HDF5 and start buzzword.

mkdir -p ~/corpora/UD_English-parsed
mkdir -p ~/corpora/uploads

if [ ! -f ~/corpora/UD_English-parsed/en-ud-train.conllu ]; then
    echo ""
    echo "=================================================="
    echo "            Downloading sample data"
    echo "=================================================="
    echo ""
    curl -o ~/corpora/UD_English-parsed/en-ud-train.conllu https://raw.githubusercontent.com/UniversalDependencies/UD_English-EWT/master/en_ewt-ud-train.conllu
fi

if [ ! -f ~/corpora/UD_English-parsed/en-ud-dev.conllu ]; then
    curl -o ~/corpora/UD_English-parsed/en-ud-dev.conllu https://raw.githubusercontent.com/UniversalDependencies/UD_English-EWT/master/en_ewt-ud-dev.conllu
fi

echo ""
echo "=================================================="
echo "               Compiling corpus"
echo "=================================================="
echo ""

buzzword-build

echo ""
echo "=================================================="
echo "                Starting buzzword"
echo "=================================================="
echo ""

if [[ "$@" == "nostart" ]]
then
    echo "Done!"
else
    python -m buzzword.start
fi

